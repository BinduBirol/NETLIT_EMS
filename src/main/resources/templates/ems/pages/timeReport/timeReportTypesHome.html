<!DOCTYPE html>
<html lang="en">
<head th:include="theme/header :: staticheaderFragment"></head>
<body>
	<!-- BEGIN #app -->
	<div id="app" class="app">
		<div th:include="theme/header :: dynamicheaderFragment"></div>
		<div th:include="theme/sidenav :: sidenav"></div>
		<!-- BEGIN #content -->
		<div id="content" class="app-content">
			<ul class="breadcrumb">
				<li class="breadcrumb-item"><a href="#">TIME REPORT MANAGEMENT</a></li>
				<li class="breadcrumb-item active">TYPES</li>
			</ul>

			<h1 class="page-header">Time report types</h1>
			<hr />
			
			<div class="alert alert-primary" th:if="${(param.msg != null)}">
			    [[${param.msg}]]
				 </div>
			
			<button type="button" class="btn btn-outline-theme mb-3"
				onclick="newTemplateModal()" >Add
				a new template</button>






			<table id="datatableDefaultz" class="table table-hover align-middle">
				<thead>
					<tr>
						<th>#</th>
						<th>Name</th>
						<th >Start</th>
						<th>Ends</th>
						<th>Interval</th>
						<th>Type</th>
						<th>Action</th>						
					</tr>
				</thead>
				<tbody>

					<tr th:each="t: ${types}">
						<td>[[${tStat.index+1}]]</td>
						<td>
							<input type="hidden" class="tid" th:value="${t.typeid}"/>							
							[[${t.typename}]]
						</td>
						<td>[[${t.start}]]</td>
						<td>[[${t.end}]]</td>
						<td>[[${t.interval_minutes}]] Min</td>
						<td>[[${t.isOB}]]</td>
						<td>
							<div class="btn-group">
							  <button onclick="editTemplateModal(event,this)" type="button" class="btn btn-sm btn-outline-info">Edit</button>
							  <button onclick="deleteTemplateModal(event)" type="button" class="btn btn-sm btn-outline-danger">Delete</button>							  
							</div>
						</td>	
					</tr>
				</tbody>
			</table>





			<div class="modal fade" id="templatemodal">
				<div class="modal-dialog modal-dialog-centered">
					<div class="modal-content">
						<form action="/doEmailTemplate" method="post">
							<div class="modal-header">
								<h5 class="modal-title">EMAIL TEMPLATE</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
							</div>
							<div class="modal-body">
							

								<div class="form-group mb-3">				
										<div class="form-group mb-3">
											<label class="form-label">Type name</label> 
											<input class="form-control" id="typename"/>
										</div>										
										
										<input type="hidden"  name="typeid" id="typeid"/>
										
								</div>
								
								<div class="row">
									
									<div class="col">
										<div class="form-group mb-3">
											<label class="form-label">Working status</label> 
											<select class="form-select">
												<option value="1">Present</option>
												<option value="0">Absent</option>											
											</select>
										</div>
									</div>
									<div class="col">
										<div class="form-group mb-3">
											<label class="form-label">OB status</label> 
											<select class="form-select">
												<option value="0">Regular time</option>
												<option value="1">Overtime</option>	
											</select>
										</div>
									</div>
								</div>
								

								<div class="row">
									<div class="col">
										<div class="form-group mb-3">
											<label class="form-label">Start</label> 
											<input onclick="this.showPicker()" type="time" class="form-control dis" id="start" name="work_start">											</select>
										</div>
									</div>
									<div class="col">
										<div class="form-group mb-3">
											<label class="form-label">Intarval (Minute)</label> 
											<input type="number" class="form-control dis" id="intarval" name="work_interval">											</select>
										</div>
									</div>
									<div class="col">
										<div class="form-group mb-3">
											<label class="form-label">End</label> 
											<input onclick="this.showPicker()" type="time" class="form-control dis" id="end" name="work_end">											</select>
										</div>
									</div>
								</div>
								
								<span class="h5">Total hours : </span><span class="h5" id="work_hour"></span>
								&nbsp;<span id="status_str" class="h5"></span>
								

							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default"
									data-bs-dismiss="modal">Close</button>
								<button type="submit" class="btn btn-outline-theme">Save
									template</button>
							</div>

						</form>
					</div>
				</div>
			</div>
			
			
			<div class="modal fade" id="deleteModal">
				<div class="modal-dialog modal-dialog-centered">
					<div class="modal-content">
						<form action="/deleteEmailTemplate" method="post">
							<div class="modal-header">
								<h5 class="modal-title">DELETE TEMPLATE</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
							</div>
							<div class="modal-body">

								Do you want to delete this template?
								<input type="hidden" name="id"/>



							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default"
									data-bs-dismiss="modal">Close</button>
								<button type="submit" class="btn btn-outline-danger">Delete
									template</button>
							</div>

						</form>
					</div>
				</div>
			</div>


		</div>
		<!-- END #content -->
		<div th:include="theme/theme_util :: theme_util"></div>
	</div>
	<!-- END #app -->
	<div th:include="theme/footer::staticFooter"></div>
	<script type="text/javascript">
		function editTemplateModal(e,z) {
			$target= $(e.target).closest('tr');
			var id=$target.find(".tid").val();
			var name=$target.find(".tname").val();
			var text=$target.find(".tmsg").val();
			var empid=$target.find(".tempid").val();
			
			var modal= $("#templatemodal");
			modal.find("#id").val(id);
			modal.find("#name").val(name);
			modal.find("#text").val(text);
			modal.find("#empid").val(empid);
			modal.find('#id').prop('disabled', false);
			modal.modal('show');
		}
		
		function newTemplateModal() {
			var modal= $("#templatemodal");
			modal.find("input, textarea").val("");
			modal.find('#id').prop('disabled', true);
			modal.modal('show');
		}
		
		function deleteTemplateModal(e) {
			$target= $(e.target).closest('tr');
			var id=$target.find(".tid").val();
			var name=$target.find(".tname").val();
			var modal= $("#deleteModal");
			modal.find(".modal-title").text(name);
			modal.find("input").val(id);
			modal.modal('show');
		}
	
	</script>

	
</body>
</html>